<!DOCTYPE html>
<html lang="en-us"
  dir="ltr">

  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width"><meta name="description" content="" />

<title>
    
    How to Measure Temperature Using An Arduino and RTD | 
    
</title>

<link rel="canonical" href="//localhost:1313/posts/temp_sensor/" />












<link rel="stylesheet" href="/assets/combined.min.1ddff9327769427ec3c5a9b8c4457be6d1be407395881ad400dd674e4dc37aaf.css" media="all">




  </head>

  

  
  
  

  <body class="auto">

    <div class="content">
      <header>
        

<div class="header">

    

    <h1 class="header-title"></h1>

    <div class="flex">
        

        
        
        <p class="small ">
            <a href="/">
                /home
            </a>
        </p>
        
        <p class="small ">
            <a href="/intel_arduino_blog/posts">
                /posts
            </a>
        </p>
        
        
    </div>

    

</div>
      </header>

      <main class="main">
        





<div >

  <div class="single-intro-container">

    

    <h1 class="single-title">How to Measure Temperature Using An Arduino and RTD</h1>
    

    
    
    <div class="single-author">
      
        <p>By: Reuben De Souza</p>
      
    </div>

    

    <p class="single-readtime">
      
      
      
      <time datetime="2024-07-25T10:58:28-07:00">July 25, 2024</time>
      

      
    </p>

  </div>

  

  

  

  

  <div class="single-content">
    <p>// Insert Top level image</p>
<h1 id="what-is-an-rtd">What is an RTD</h1>
<p>A <em>Resistance Temperature Dectector</em> (RTD) is a simple sensor whose resistance changes as its temperature changes. The RTD we will be using today is the <a href="https://www.adafruit.com/product/3290">PT100</a>, from a well respected hardware company, <em>Adafruit</em>. The <strong>PT</strong> indicates that the &ldquo;resistor&rdquo; inside is just a small strip of platinum, and the <strong>100</strong> indicates at 0 degrees celsius the platinum will have a resistance of 100 ohms. Platinum is used in the resistor because it is stable, provides repeatable results, and boasts a broad temperature range.</p>
<p>// insert RTD picture</p>
<p>The method to calculate the resistance of the platinum is slightly more complicated than applying a voltage, measuring the corresponding current, then using Ohm&rsquo;s Law <code>R = V/I</code> to solve for <code>R</code>. Instead, a second reference resistor (RREF) is placed in series with the RTD. A voltage is applied to the pair, and the voltage of each individual resistor is measured. The ratio of these two voltages, which also respresents the ratio of resistance due to the constant current, can be multiplied by the known RREF to obtain the RTD&rsquo;s resistance. This process allows for accurate readings at low resistances, and recognizes small changes in resistance, improving the accuracy significantly. To accomplish this, a separate chip is necessary: Adafruit&rsquo;s <a href="https://www.adafruit.com/product/3328">MAX31865 Amplifier</a>. This amplifier includes the required chip to do the above measurement process, and the peripherals to communicate its reading to the Arduino using Serial Peripheral Interface <a href="https://learn.sparkfun.com/tutorials/serial-peripheral-interface-spi/all">(SPI)</a>. SPI is a standardized way to use the <a href="https://learn.sparkfun.com/tutorials/serial-communication/all">Serial</a> communication method, which makes talking to different external chips simple and customary. To find out more about the amplifier consult the <a href="https://learn.adafruit.com/adafruit-max31865-rtd-pt100-amplifier/downloads">datasheet</a>.</p>
<h1 id="pinout">Pinout</h1>
<p>










<figure class="">

    <div>
        <img loading="lazy" alt="pinout" src=" /intel_arduino_blog/images/top_down_board.jpg">
    </div>

    
</figure></p>
<p>The black box in the middle is the actual chip (also known as an integrated circuit). All the other parts are used to support the chip&rsquo;s functions, such as the reference resistor, labeled <em>RREF</em>.</p>
<h3 id="to-connect-to-an-arduino-we-need-to-use-the-following-pins">To connect to an Arduino we need to use the following pins:</h3>
<h4 id="power-pins">Power Pins</h4>
<ul>
<li>VIN: (<strong>V</strong>oltage <strong>In</strong>), the board needs 3V DC to operate, but an onboard voltage regulator allows for an Arduino&rsquo;s 5V power pin to connect seamlessly</li>
<li>GND: The ground pin, a feature for every circuit</li>
</ul>
<h4 id="spi-logic-pins">SPI Logic Pins</h4>
<ul>
<li>CLK: The <strong>Cl</strong>oc<strong>k</strong> pin, vital to any communication protocol</li>
<li>SDO: <strong>S</strong>erial <strong>D</strong>ata <strong>O</strong>ut, also known as Microcontroller In Sensor Out, used for data sent from the <em>amplifier</em> to the <em>Arduino</em></li>
<li>SDI: <strong>S</strong>erial <strong>D</strong>ata <strong>I</strong>n, also known as Microcontroller Out Sensor In, used for data sent from the <em>Arduino</em> to the <em>amplifier</em></li>
<li>CS: <strong>C</strong>hip <strong>S</strong>elect, when low the amplifier is active</li>
</ul>
<p>These 4 pins are the heart of the SPI protocol and are all we need, besides power and ground to communicate between the amplifier and Arduino.</p>
<h1 id="configuring-the-board">Configuring the board</h1>
<p>By default the board is set up for the 4 wire sensor. Since our PT100 only has 3 wires, a little soldering is necessary to configure thecircuits correctly. For those unfamiliar with soldering, its purpose is to make electrical connections that are a little more permanat than twisting two wires together. I&rsquo;d recomend looking at a tutorial and practicing on some spare parts before attempting the real board. Here&rsquo;s a guide that might <a href="https://learn.adafruit.com/adafruit-guide-excellent-soldering">help</a>











<figure class="">

    <div>
        <img loading="lazy" alt="jumpers" src=" /intel_arduino_blog/images/top_down_board.jpg">
    </div>

    
</figure></p>
<p>There are three jump pads that could be configured, we need to do the following:</p>
<ul>
<li><span style="color: red">Solder closed the jumper labeled 2/3 Wire </span></li>
<li><span style="color: green">Leave jumper labeled 2 Wire untouched </span></li>
<li><span style="color: purple">Cut the small tab just to the right of the _4_ on the pad labeled "24 3", then solder the rigthmost and middle pads closed.</span></li>
</ul>
<p>Tips for 3 pad jumper:</p>
<ul>
<li>Cutting the tab can be difficult and does scratch the surrounding area slightly, but the circuit should still work fine</li>
<li>Use a small amount of solder when connecting the middle and right pads and have a solder sucker ready in case the left pad accidentely gets connected</li>
<li>My first time trying to get the solder to lay correctly took quite a bit of trial and error, but just be careful to not overheat the chip</li>
</ul>
<h1 id="board-assembly">Board Assembly</h1>
<p>










<figure class="">

    <div>
        <img loading="lazy" alt="connector pins" src=" /intel_arduino_blog/images/solder_pins.jpg">
    </div>

    
</figure></p>
<p>Why have the extra wire or two? Improved accuracy. In order to obtain very precise readings of low resistance, the resistance of the wire connecting the piece of platinum to the board must also be accounted for, since it could be a couple ohms, resulting in up to a degree celsius change. By having that extra wire, we can measure the resistance of the leads and subtract that from our total measured resistance. If you want more information Omega has a good explanation <a href="https://www.omega.com/en-us/resources/rtd-2-3-4-wire-connections">here.</a></p>
<p>










<figure class="">

    <div>
        <img loading="lazy" alt="wire resistance" src=" /intel_arduino_blog/images/three_wires.jpg">
    </div>

    
</figure></p>
<p>You can see the difference in resistances between the wires in the 3-wire PT100 configuration.
For example, if the total measrued resistance is 104 ohms, the 2 ohms would be subtracted to get that the real resistance of the platinum is 102 ohms.</p>
<h3 id="wiring-it-up">Wiring it Up!</h3>
<p><strong>4 Wires</strong>
Typically, the wire that connect together have matching colors, but to double check connect a multimeter to see which ones are actually <em>pairs</em>.
Then, insert one pair of matching wires into one terminal and the same with the other pair. It doesn&rsquo;t matter which wire of the <em>pair</em> goes on the inside or outside. Use a 2.4 mm flathead screwdriver to</p>
<p>You should not have soldered any of the jumper so your final board should look similar to this.</p>
<p><strong>3 Wires</strong>
Again, check to make sure the matching colors have around a 2 ohm between them. This time insert the <em>matching pair</em> in the right terminal with the <strong>F+</strong> label in between the terminal and the punch hole. The solo wire should be placed in the other terminal, in either slot.</p>
<p>










<figure class="">

    <div>
        <img loading="lazy" alt="complete three wire" src=" /intel_arduino_blog/images/three_wired.jpg">
    </div>

    
</figure></p>
<p>You should have soldered the &ldquo;2/3 Wire&rdquo; jump pad and the right two pads of the jumper with the directly flower to the right.</p>
<p><strong>2 Wire</strong>
This is the simplest. Just place both wires in one of the terminal. Then either solder closed the jumpers next to the RTD terminal block or put little wires in the right and left terminal blocks to short them together.</p>
<h1 id="arduino-connection">Arduino Connection</h1>
<h3 id="spi-wiring">SPI Wiring</h3>
<p>On an Arduino board:</p>
<ul>
<li>Connect <strong>Vin</strong> to the 5V or 3V power pin, for most Arduinos the 5V works well.</li>
<li>Connect <strong>GND</strong> to a command ground pin, also labeled <strong>GND</strong></li>
<li>Connect <strong>CLK</strong> to <strong>Digital #13</strong></li>
<li>Connect <strong>SDO</strong> to <strong>Digital #12</strong></li>
<li>Connect <strong>SDI</strong> to <strong>Digital #11</strong></li>
<li>Connect <strong>CS</strong> to <strong>Digital #10</strong></li>
</ul>
<p>Other digital pins can be used, as long as the code reflects the changes. You&rsquo;ll see what I mean when we look at the library.</p>
<h3 id="download-adafruit_max31865-library">Download Adafruit_MAX31865 Library</h3>
<p>In the Arduino IDE, open up the library manager:</p>
<p>










<figure class="">

    <div>
        <img loading="lazy" alt="library manager" src=" /intel_arduino_blog/images/library_manager_menu.png">
    </div>

    
</figure></p>
<p>Search for the Adafruit MAX31865 library:</p>
<p>










<figure class="">

    <div>
        <img loading="lazy" alt="search bar" src=" /intel_arduino_blog/images/search_max31865.png">
    </div>

    
</figure></p>
<p>Click <strong>Install</strong>!</p>
<p>Alternatively, in Platformio add the following line under the <code>[env:]</code> section of the platformio.ini file:</p>
<pre tabindex="0"><code>lib_deps = adafruit/Adafruit MAX31865 library@^1.6.2
</code></pre><p>This will autmatically install the library for you!</p>
<h3 id="run-example">Run Example</h3>
<p>In the Arduino IDE, go to <strong>File-&gt;Examples-&gt;Adaruit MAX31865 library-&gt;max31865</strong>
The example file should pop up.</p>
<p>










<figure class="">

    <div>
        <img loading="lazy" alt="load demo" src=" /intel_arduino_blog/images/load_demo.png">
    </div>

    
</figure></p>
<p>The example can also be accessed in Platformio under the following filepath:
<strong>.pio-&gt;libdeps-&gt;board_name-&gt;Adafruit MAX31865 library-&gt;examples-&gt;max31865-&gt;max31865.ino</strong></p>
<p>










<figure class="">

    <div>
        <img loading="lazy" alt="load demo" src=" /intel_arduino_blog/images/example_platformio.png">
    </div>

    
</figure></p>
<p>You can also download this file [here].</p>
<p>Right underneath, the instantiation of the class, two <code>#define</code> are made. It&rsquo;s important to change those accordingly based on if you are using the PT100 or PT1000. For the PT100 my section looks like this:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#95a5a6">// The value of the Rref resistor. Use 430.0 for PT100 and 4300.0 for PT1000
</span></span></span><span style="display:flex;"><span><span style="color:#95a5a6"></span><span style="color:#728e00">#define RREF      430.0
</span></span></span><span style="display:flex;"><span><span style="color:#728e00"></span><span style="color:#95a5a6">// The &#39;nominal&#39; 0-degrees-C resistance of the sensor
</span></span></span><span style="display:flex;"><span><span style="color:#95a5a6">// 100.0 for PT100, 1000.0 for PT1000
</span></span></span><span style="display:flex;"><span><span style="color:#95a5a6"></span><span style="color:#728e00">#define RNOMINAL  100.0
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Now you can upload your code, open the serial monitor, and hopefully your temperature readings will be displayed every second!</p>

    
  </div>

  

  

  

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


      </main>
    </div>

    <footer>
      <p>Powered by
    <a href="https://gohugo.io/">Hugo</a>
    and
    <a href="https://github.com/tomfran/typo">tomfran/typo</a>
</p>


    </footer>

  </body>

  <script>

  function isAuto() {
    return document.body.classList.contains("auto");
  }

  function setTheme() {
    if (!isAuto()) {
      return
    }

    document.body.classList.remove("auto");
    let cls = "light";
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      cls = "dark";
    }

    document.body.classList.add(cls);
  }

  function invertBody() {
    document.body.classList.toggle("dark");
    document.body.classList.toggle("light");
  }

  if (isAuto()) {
    window.matchMedia('(prefers-color-scheme: dark)').addListener(invertBody);
  }

  setTheme();

</script>

</html>